<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/custom_acquisition/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Writing a custom acquisition function | BoTorch</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://botorch.org/botorch/img/botorch.png"><meta data-rh="true" name="twitter:image" content="https://botorch.org/botorch/img/botorch.png"><meta data-rh="true" property="og:url" content="https://botorch.org/botorch/docs/tutorials/custom_acquisition/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Writing a custom acquisition function | BoTorch"><meta data-rh="true" name="description" content="&lt;LinkButtons"><meta data-rh="true" property="og:description" content="&lt;LinkButtons"><link data-rh="true" rel="icon" href="/botorch/img/botorch.ico"><link data-rh="true" rel="canonical" href="https://botorch.org/botorch/docs/tutorials/custom_acquisition/"><link data-rh="true" rel="alternate" href="https://botorch.org/botorch/docs/tutorials/custom_acquisition/" hreflang="en"><link data-rh="true" rel="alternate" href="https://botorch.org/botorch/docs/tutorials/custom_acquisition/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://4ROLHRP5JS-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="BoTorch" href="/botorch/opensearch.xml">
<link rel="stylesheet" href="/css/code_block_buttons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/js/code_block_buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><link rel="stylesheet" href="/botorch/assets/css/styles.0e4f1a4a.css">
<script src="/botorch/assets/js/runtime~main.6cf868af.js" defer="defer"></script>
<script src="/botorch/assets/js/main.e817baca.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/botorch/"><div class="navbar__logo"><img src="/botorch/img/botorch.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/botorch/img/botorch.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">BoTorch</b></a><a class="navbar__item navbar__link" href="/botorch/docs/introduction">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/botorch/docs/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/botorch/api/">API Reference</a><a class="navbar__item navbar__link" href="/botorch/docs/papers">Papers</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pytorch/botorch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/botorch/docs/tutorials/">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/botorch/docs/tutorials/">Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/botorch/docs/tutorials/custom_botorch_model_in_ax/">Using BoTorch with Ax</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/botorch/docs/tutorials/custom_botorch_model_in_ax/">Using a custom BoTorch model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/botorch/docs/tutorials/custom_acquisition/">Writing a custom acquisition function</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/botorch/docs/tutorials/closed_loop_botorch_only/">Full Optimization Loops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/botorch/docs/tutorials/multi_objective_bo/">Multi-Objective Bayesian Optimization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/botorch/docs/tutorials/fit_model_with_torch_optimizer/">Bite-Sized Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/botorch/docs/tutorials/meta_learning_with_rgpe/">Advanced Usage</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/botorch/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Using BoTorch with Ax</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Writing a custom acquisition function</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Writing a custom acquisition function</h1></header><div class="margin-top--sm margin-bottom--lg"><a href="https://github.com/cristianlara/botorch/blob/main/tutorials/custom_acquisition/custom_acquisition.ipynb" target="_blank" rel="noopener noreferrer" class="button button--outline button--primary margin-right--xs">Open in GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://colab.research.google.com/github/cristianlara/botorch/blob/main/tutorials/custom_acquisition/custom_acquisition.ipynb" target="_blank" rel="noopener noreferrer" class="button button--outline button--primary margin--xs">Run in Google Colab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upper-confidence-bound-ucb">Upper Confidence Bound (UCB)<a href="#upper-confidence-bound-ucb" class="hash-link" aria-label="Direct link to Upper Confidence Bound (UCB)" title="Direct link to Upper Confidence Bound (UCB)">​</a></h3>
<p>The Upper Confidence Bound (UCB) acquisition function balances exploration and
exploitation by assigning a score of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo>+</mo><msqrt><mi>β</mi></msqrt><mo>⋅</mo><mi>σ</mi></mrow><annotation encoding="application/x-tex">\mu + \sqrt{\beta} \cdot \sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.205em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.835em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord mathnormal" style="margin-right:0.05278em">β</span></span></span><span style="top:-2.795em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.205em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">σ</span></span></span></span> if the posterior
distribution is normal with mean <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span></span></span></span> and variance <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>. This &quot;analytic&quot; version
is implemented in the <code>UpperConfidenceBound</code> class. The Monte Carlo version of UCB is
implemented in the <code>qUpperConfidenceBound</code> class, which also allows for q-batches of
size greater than one. (The derivation of q-UCB is given in Appendix A of
<a href="https://arxiv.org/pdf/1712.00424.pdf" target="_blank" rel="noopener noreferrer">Wilson et. al., 2017</a>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-scalarized-version-of-q-ucb">A scalarized version of q-UCB<a href="#a-scalarized-version-of-q-ucb" class="hash-link" aria-label="Direct link to A scalarized version of q-UCB" title="Direct link to A scalarized version of q-UCB">​</a></h3>
<p>Suppose now that we are in a multi-output setting, where, e.g., we model the effects of
a design on multiple metrics. We first show a simple extension of the q-UCB acquisition
function that accepts a multi-output model and performs q-UCB on a scalarized version of
the multiple outputs, achieved via a vector of weights. Implementing a new acquisition
function in botorch is easy; one simply needs to implement the constructor and a
<code>forward</code> method.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> plotly</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Ax uses Plotly to produce interactive plots. These are great for viewing and analysis,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># though they also lead to large file sizes, which is not ideal for files living in GH.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Changing the default to `png` strips the interactive components to get around this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">renderers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">default </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;png&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acquisition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">monte_carlo </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MCAcquisitionFunction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sampling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MCSampler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sampling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">normal </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SobolQMCNormalSampler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> t_batch_mode_transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">qScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MCAcquisitionFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weights</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sampler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MCSampler</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># we use the AcquisitionFunction constructor, since that of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># MCAcquisitionFunction performs some validity checks that we don&#x27;t want here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MCAcquisitionFunction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> sampler </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sampler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SobolQMCNormalSampler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sample_shape</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sampler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sampler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;weights&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@t_batch_mode_transform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Evaluate scalarized qUCB on the candidate set `X`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            X: A `(b) x q x d`-dim Tensor of `(b)` t-batches with `q` `d`-dim</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                design points each.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Tensor: A `(b)`-dim Tensor of Upper Confidence Bound values at the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                given design points `X`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        posterior </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">posterior</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        samples </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_posterior_samples</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">posterior</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># n x b x q x o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scalarized_samples </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> samples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matmul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># n x b x q</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mean </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> posterior</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean  </span><span class="token comment" style="color:#999988;font-style:italic"># b x q x o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scalarized_mean </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mean</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matmul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b x q</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ucb_samples </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            scalarized_mean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beta </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pi </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scalarized_samples </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> scalarized_mean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ucb_samples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dim</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dim</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">I1116 181426.999 _utils_internal.py:179] NCCL_DEBUG env var is set to None</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">I1116 181427.000 _utils_internal.py:188] NCCL_DEBUG is INFO from /etc/nccl.conf</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/mpmath/ctx_mp_python.py:892: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/mpmath/ctx_mp_python.py:986: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/sympy/solvers/diophantine.py:3188: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/sympy/plotting/plot.py:520: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/sympy/plotting/plot.py:540: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/sympy/plotting/plot.py:553: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p><p style="margin-bottom:0px">/data/sandcastle/boxes/fbsource/buck-out/v2/gen/fbcode/f3b9a99e517e0a13/bento/kernels/__bento_kernel_axoptics__/bento_kernel_axoptics#link-tree/sympy/plotting/plot.py:560: SyntaxWarning:</p><p style="margin-bottom:0px">&quot;is&quot; with a literal. Did you mean &quot;==&quot;?</p></pre></div>
<p>Note that <code>qScalarizedUpperConfidenceBound</code> is very similar to <code>qUpperConfidenceBound</code>
and only requires a few lines of new code to accomodate scalarization of multiple
outputs. The <code>@t_batch_mode_transform</code> decorator ensures that the input <code>X</code> has an
explicit t-batch dimension (code comments are added with shapes for clarity).</p>
<p>See the end of this tutorial for a quick and easy way of achieving the same
scalarization effect using <code>ScalarizedPosteriorTransform</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ad-hoc-testing-q-scalarized-ucb">Ad-hoc testing q-Scalarized-UCB<a href="#ad-hoc-testing-q-scalarized-ucb" class="hash-link" aria-label="Direct link to Ad-hoc testing q-Scalarized-UCB" title="Direct link to Ad-hoc testing q-Scalarized-UCB">​</a></h4>
<p>Before hooking the newly defined acquisition function into a Bayesian Optimization loop,
we should test it. For this we&#x27;ll just make sure that it properly evaluates on a
compatible multi-output model. Here we just define a basic multi-output <code>SingleTaskGP</code>
model trained on synthetic data.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> fit_gpytorch_mll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">models </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SingleTaskGP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> standardize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> gpytorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mlls </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ExactMarginalLogLikelihood</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># generate synthetic data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> standardize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># standardize to zero mean unit variance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># construct and fit the multi-output model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SingleTaskGP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mll </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ExactMarginalLogLikelihood</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">likelihood</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fit_gpytorch_mll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mll</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># construct the acquisition function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qSUCB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> qScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> beta</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> weights</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># evaluate on single q-batch with q=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qSUCB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">tensor([0.4412], grad_fn=&lt;MeanBackward1&gt;)</p></pre></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># batch-evaluate on two q-batches with q=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qSUCB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">tensor([0.5129, 0.5216], grad_fn=&lt;MeanBackward1&gt;)</p></pre></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-scalarized-version-of-analytic-ucb-q1-only">A scalarized version of analytic UCB (<code>q=1</code> only)<a href="#a-scalarized-version-of-analytic-ucb-q1-only" class="hash-link" aria-label="Direct link to a-scalarized-version-of-analytic-ucb-q1-only" title="Direct link to a-scalarized-version-of-analytic-ucb-q1-only">​</a></h3>
<p>We can also write an <em>analytic</em> version of UCB for a multi-output model, assuming a
multivariate normal posterior and <code>q=1</code>. The new class <code>ScalarizedUpperConfidenceBound</code>
subclasses <code>AnalyticAcquisitionFunction</code> instead of <code>MCAcquisitionFunction</code>. In contrast
to the MC version, instead of using the weights on the MC samples, we directly scalarize
the mean vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span></span></span></span> and covariance matrix <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord">Σ</span></span></span></span> and apply standard UCB on the
univariate normal distribution, which has mean <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mi>T</mi></msup><mi>μ</mi></mrow><annotation encoding="application/x-tex">w^T \mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span><span class="mord mathnormal">μ</span></span></span></span> and variance <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mi>T</mi></msup><mi mathvariant="normal">Σ</mi><mi>w</mi></mrow><annotation encoding="application/x-tex">w^T \Sigma w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span></span></span></span></span><span class="mord">Σ</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span></span></span></span>. In
addition to the <code>@t_batch_transform</code> decorator, here we are also using <code>expected_q=1</code> to
ensure the input <code>X</code> has a <code>q=1</code>.</p>
<p><em>Note:</em> BoTorch also provides a <code>ScalarizedPosteriorTransform</code> abstraction that can be
used with any existing analytic acqusition functions and automatically performs the
scalarization we implement manually below. See the end of this tutorial for a usage
example.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acquisition </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AnalyticAcquisitionFunction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AnalyticAcquisitionFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weights</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maximize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># we use the AcquisitionFunction constructor, since that of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># AnalyticAcquisitionFunction performs some validity checks that we don&#x27;t want here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AnalyticAcquisitionFunction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">maximize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maximize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register_buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;weights&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@t_batch_mode_transform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expected_q</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Evaluate the Upper Confidence Bound on the candidate set X using scalarization</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            X: A `(b) x d`-dim Tensor of `(b)` t-batches of `d`-dim design</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                points each.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Returns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            A `(b)`-dim Tensor of Upper Confidence Bound values at the given</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                design points `X`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        batch_shape </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        posterior </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">posterior</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        means </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> posterior</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mean</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">squeeze</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dim</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b x o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scalarized_mean </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> means</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matmul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        covs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> posterior</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mvn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">covariance_matrix  </span><span class="token comment" style="color:#999988;font-style:italic"># b x o x o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weights </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 1 x o x 1 (assume single batch dimension)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weights </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> weights</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch_shape </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> weights</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b x o x 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        weights_transpose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> weights</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">permute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b x 1 x o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scalarized_variance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bmm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            weights_transpose</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bmm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">covs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> weights</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            batch_shape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># b</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expand_as</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scalarized_mean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> scalarized_variance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">maximize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> scalarized_mean </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> delta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> scalarized_mean </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> delta</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ad-hoc-testing-scalarized-ucb">Ad-hoc testing Scalarized-UCB<a href="#ad-hoc-testing-scalarized-ucb" class="hash-link" aria-label="Direct link to Ad-hoc testing Scalarized-UCB" title="Direct link to Ad-hoc testing Scalarized-UCB">​</a></h4>
<p>Notice that we pass in an explicit q-batch dimension for consistency, even though <code>q=1</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># construct the acquisition function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUCB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> beta</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> weights</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># evaluate on single point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUCB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">tensor([0.5031], grad_fn=&lt;AddBackward0&gt;)</p></pre></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># batch-evaluate on 3 points</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUCB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">tensor([-0.6162, -0.8318, -0.1927], grad_fn=&lt;AddBackward0&gt;)</p></pre></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-custom-acquisition-function-with-axs-service-api">Using the custom acquisition function with Ax&#x27;s Service API<a href="#using-the-custom-acquisition-function-with-axs-service-api" class="hash-link" aria-label="Direct link to Using the custom acquisition function with Ax&#x27;s Service API" title="Direct link to Using the custom acquisition function with Ax&#x27;s Service API">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="registering-the-new-acquisition-function">Registering the new acquisition function<a href="#registering-the-new-acquisition-function" class="hash-link" aria-label="Direct link to Registering the new acquisition function" title="Direct link to Registering the new acquisition function">​</a></h3>
<p>In order to use an acquisition function, Ax needs to know how to generate inputs to
construct the acquisition function.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Any</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Dict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acquisition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">input_constructors </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> acqf_input_constructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@acqf_input_constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">construct_inputs_scalarized_ucb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    beta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    weights</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    posterior_transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Dict</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Any</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;model&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">double</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;weights&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">weights</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">double</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-a-generationstrategy-using-botorch_modular-with-our-custom-acquistion-function">Setting up a <code>GenerationStrategy</code> using <code>BOTORCH_MODULAR</code> with our custom acquistion function.<a href="#setting-up-a-generationstrategy-using-botorch_modular-with-our-custom-acquistion-function" class="hash-link" aria-label="Direct link to setting-up-a-generationstrategy-using-botorch_modular-with-our-custom-acquistion-function" title="Direct link to setting-up-a-generationstrategy-using-botorch_modular-with-our-custom-acquistion-function">​</a></h3>
<p><code>BOTORCH_MODULAR</code> is a convenient wrapper implemented in Ax that facilitates the use of
custom BoTorch models and acquisition functions in Ax experiments. In order to customize
the way the candidates are generated, we need to construct a new <code>GenerationStrategy</code>
and pass it into the <code>AxClient</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">modelbridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generation_strategy </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> GenerationStep</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> GenerationStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">modelbridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registry </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GenerationStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Quasi-random initialization step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GenerationStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            model</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SOBOL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            num_trials</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># How many trials should be produced from this generation step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            model_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;seed&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">999</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Any kwargs you want passed into the model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Bayesian optimization step using the custom acquisition function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GenerationStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            model</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BOTORCH_MODULAR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            num_trials</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># No limitation on how many trials should be produced from this step</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># For `BOTORCH_MODULAR`, we pass in kwargs to specify what surrogate or acquisition function to use.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># `acquisition_options` specifies the set of additional arguments to pass into the input constructor.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            model_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;botorch_acqf_class&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ScalarizedUpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;acquisition_options&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;weights&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-experiment">Setting up the experiment<a href="#setting-up-the-experiment" class="hash-link" aria-label="Direct link to Setting up the experiment" title="Direct link to Setting up the experiment">​</a></h3>
<p>We will set up a simple experiment to optimize a simple scalarization of the
BraninCurrin function (per the weights above). A detailed tutorial on Service API can be
found <a href="https://ax.dev/tutorials/gpei_hartmann_service.html" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>In order to use the <code>GenerationStrategy</code> we just created, we will pass it into the
<code>AxClient</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ax_client </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AxClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instantiation </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ObjectiveProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test_functions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BraninCurrin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize the client - AxClient offers a convenient API to control the experiment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax_client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AxClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">generation_strategy</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">gs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Setup the experiment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_experiment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;branincurrin_test_experiment&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parameters</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation operator" style="color:#393A34">+</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;range&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># It is crucial to use floats for the bounds, i.e., 0.0 rather than 0.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Otherwise, the parameter would</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;bounds&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    objectives</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;branin&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ObjectiveProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minimize</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;currin&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ObjectiveProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minimize</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Setup a function to evaluate the trials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">branincurrin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BraninCurrin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">evaluate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">parameters</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">parameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation operator" style="color:#393A34">+</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bc_eval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> branincurrin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">squeeze</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tolist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># In our case, standard error is 0, since we are computing a synthetic function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;branin&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bc_eval</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;currin&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bc_eval</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Starting optimization with verbose logging. To disable logging, set the verbose_logging argument to False. Note that float values in the logs are rounded to 6 decimal points.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.utils.instantiation: Due to non-specification, we will use the heuristic for selecting objective thresholds.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.utils.instantiation: Inferred value type of ParameterType.FLOAT for parameter x1. If that is not the expected value type, you can explicity specify &#x27;value_type&#x27; (&#x27;int&#x27;, &#x27;float&#x27;, &#x27;bool&#x27; or &#x27;str&#x27;) in parameter dict.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.utils.instantiation: Inferred value type of ParameterType.FLOAT for parameter x2. If that is not the expected value type, you can explicity specify &#x27;value_type&#x27; (&#x27;int&#x27;, &#x27;float&#x27;, &#x27;bool&#x27; or &#x27;str&#x27;) in parameter dict.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.utils.instantiation: Created search space: SearchSpace(parameters=[RangeParameter(name=&#x27;x1&#x27;, parameter_type=FLOAT, range=[0.0, 1.0]), RangeParameter(name=&#x27;x2&#x27;, parameter_type=FLOAT, range=[0.0, 1.0])], parameter_constraints=[]).</p></pre></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-bo-loop">Running the BO loop<a href="#running-the-bo-loop" class="hash-link" aria-label="Direct link to Running the BO loop" title="Direct link to Running the BO loop">​</a></h3>
<p>Ax makes this part super simple!</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parameters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> trial_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_next_trial</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Local evaluation here can be replaced with deployment to external system.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">complete_trial</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">trial_index</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">trial_index</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> raw_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">evaluate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">parameters</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Generated new trial 0 with parameters {&#x27;x1&#x27;: 0.62873, &#x27;x2&#x27;: 0.51481}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Completed trial 0 with data: {&#x27;branin&#x27;: (46.244598, 0.0), &#x27;currin&#x27;: (6.842319, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Generated new trial 1 with parameters {&#x27;x1&#x27;: 0.434883, &#x27;x2&#x27;: 0.396266}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Completed trial 1 with data: {&#x27;branin&#x27;: (14.735401, 0.0), &#x27;currin&#x27;: (8.740173, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Generated new trial 2 with parameters {&#x27;x1&#x27;: 0.075645, &#x27;x2&#x27;: 0.934926}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Completed trial 2 with data: {&#x27;branin&#x27;: (2.808084, 0.0), &#x27;currin&#x27;: (4.10731, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Generated new trial 3 with parameters {&#x27;x1&#x27;: 0.863245, &#x27;x2&#x27;: 0.038764}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Completed trial 3 with data: {&#x27;branin&#x27;: (9.956846, 0.0), &#x27;currin&#x27;: (10.342199, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Generated new trial 4 with parameters {&#x27;x1&#x27;: 0.953918, &#x27;x2&#x27;: 0.808236}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:43] ax.service.ax_client: Completed trial 4 with data: {&#x27;branin&#x27;: (95.420815, 0.0), &#x27;currin&#x27;: (4.715139, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:44] ax.service.ax_client: Generated new trial 5 with parameters {&#x27;x1&#x27;: 1.0, &#x27;x2&#x27;: 0.343958}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:45] ax.service.ax_client: Completed trial 5 with data: {&#x27;branin&#x27;: (6.593266, 0.0), &#x27;currin&#x27;: (7.800417, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:45] ax.service.ax_client: Generated new trial 6 with parameters {&#x27;x1&#x27;: 0.545885, &#x27;x2&#x27;: 0.0}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:45] ax.service.ax_client: Completed trial 6 with data: {&#x27;branin&#x27;: (5.420934, 0.0), &#x27;currin&#x27;: (11.428976, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:47] ax.service.ax_client: Generated new trial 7 with parameters {&#x27;x1&#x27;: 0.123588, &#x27;x2&#x27;: 0.0}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:47] ax.service.ax_client: Completed trial 7 with data: {&#x27;branin&#x27;: (151.344849, 0.0), &#x27;currin&#x27;: (12.426076, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:48] ax.service.ax_client: Generated new trial 8 with parameters {&#x27;x1&#x27;: 0.045172, &#x27;x2&#x27;: 0.0}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:48] ax.service.ax_client: Completed trial 8 with data: {&#x27;branin&#x27;: (240.222977, 0.0), &#x27;currin&#x27;: (7.477064, 0.0)}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:49] ax.service.ax_client: Generated new trial 9 with parameters {&#x27;x1&#x27;: 0.120649, &#x27;x2&#x27;: 0.032781}.</p></pre></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:49] ax.service.ax_client: Completed trial 9 with data: {&#x27;branin&#x27;: (142.032639, 0.0), &#x27;currin&#x27;: (12.317077, 0.0)}.</p></pre></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="viewing-trials-and-plotting-the-pareto-frontier">Viewing trials and plotting the Pareto frontier<a href="#viewing-trials-and-plotting-the-pareto-frontier" class="hash-link" aria-label="Direct link to Viewing trials and plotting the Pareto frontier" title="Direct link to Viewing trials and plotting the Pareto frontier">​</a></h3>
<p>View the trials attached to the experiment.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generation_strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">trials_as_df</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="background-color:var(--ifm-pre-background);margin-bottom:10px;border-radius:var(--ifm-global-radius);overflow:hidden;padding:5px;font:var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"><span style="color:red">Out: </span><pre style="margin:0px;background-color:inherit;padding:8px"><p style="margin-bottom:0px">[INFO 11-16 18:14:50] ax.modelbridge.generation_strategy: Note that parameter values in dataframe are rounded to 2 decimal points; the values in the dataframe are thus not the exact ones suggested by Ax in trials.</p></pre></div>
<table><thead><tr><th style="text-align:right"></th><th style="text-align:right">Generation Step</th><th style="text-align:left">Generation Model</th><th style="text-align:right">Trial Index</th><th style="text-align:left">Trial Status</th><th style="text-align:left">Arm Parameterizations</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">0</td><td style="text-align:left">Sobol</td><td style="text-align:right">0</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;0_0&#x27;: {&#x27;x1&#x27;: 0.63, &#x27;x2&#x27;: 0.51}}</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">0</td><td style="text-align:left">Sobol</td><td style="text-align:right">1</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;1_0&#x27;: {&#x27;x1&#x27;: 0.43, &#x27;x2&#x27;: 0.4}}</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">0</td><td style="text-align:left">Sobol</td><td style="text-align:right">2</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;2_0&#x27;: {&#x27;x1&#x27;: 0.08, &#x27;x2&#x27;: 0.93}}</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">0</td><td style="text-align:left">Sobol</td><td style="text-align:right">3</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;3_0&#x27;: {&#x27;x1&#x27;: 0.86, &#x27;x2&#x27;: 0.04}}</td></tr><tr><td style="text-align:right">4</td><td style="text-align:right">0</td><td style="text-align:left">Sobol</td><td style="text-align:right">4</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;4_0&#x27;: {&#x27;x1&#x27;: 0.95, &#x27;x2&#x27;: 0.81}}</td></tr><tr><td style="text-align:right">5</td><td style="text-align:right">1</td><td style="text-align:left">BoTorch</td><td style="text-align:right">5</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;5_0&#x27;: {&#x27;x1&#x27;: 1.0, &#x27;x2&#x27;: 0.34}}</td></tr><tr><td style="text-align:right">6</td><td style="text-align:right">1</td><td style="text-align:left">BoTorch</td><td style="text-align:right">6</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;6_0&#x27;: {&#x27;x1&#x27;: 0.55, &#x27;x2&#x27;: 0.0}}</td></tr><tr><td style="text-align:right">7</td><td style="text-align:right">1</td><td style="text-align:left">BoTorch</td><td style="text-align:right">7</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;7_0&#x27;: {&#x27;x1&#x27;: 0.12, &#x27;x2&#x27;: 0.0}}</td></tr><tr><td style="text-align:right">8</td><td style="text-align:right">1</td><td style="text-align:left">BoTorch</td><td style="text-align:right">8</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;8_0&#x27;: {&#x27;x1&#x27;: 0.05, &#x27;x2&#x27;: 0.0}}</td></tr><tr><td style="text-align:right">9</td><td style="text-align:right">1</td><td style="text-align:left">BoTorch</td><td style="text-align:right">9</td><td style="text-align:left">COMPLETED</td><td style="text-align:left">{&#x27;9_0&#x27;: {&#x27;x1&#x27;: 0.12, &#x27;x2&#x27;: 0.03}}</td></tr></tbody></table>
<p>Plot the Pareto frontier.</p>
<p>Note that we do not expect a good coverage of the Pareto frontier since we use very
small number of evaluations and our acquisition function naively optimizes the sum of
the two objectives.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pareto_frontier </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> plot_pareto_frontier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pareto_utils </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> compute_posterior_pareto_frontier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">notebook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plotting </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectives </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">experiment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">optimization_config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objective</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objectives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frontier </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> compute_posterior_pareto_frontier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    experiment</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">experiment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ax_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">experiment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fetch_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    primary_objective</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">objectives</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metric</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secondary_objective</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">objectives</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metric</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    absolute_metrics</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;branin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;currin&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plot_pareto_frontier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frontier</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CI_level</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAH0CAYAAABiuKiqAAAgAElEQVR4XuzdB5hcVdnA8Xd2dmZ7SzY9lEACiAYlIlWKhKJUAxiQIiKGYuigCAiGiKDSgmAQsBBQQRSMiAiICvohCiogoAldQnrd3Wyd9j33bnZJtiTznnN2d87Mf57ne/SDM+/c+zsX/O/kzmwkk8lkhAcCCCCAAAIIIIAAAgjktECEcM/p/eHgEEAAAQQQQAABBBAIBQh3LgQEEEAAAQQQQAABBDwQINw92CQOEQEEEEAAAQQQQAABwp1rAAEEEEAAAQQQQAABDwQIdw82iUNEAAEEEEAAAQQQQIBw5xpAAAEEEEAAAQQQQMADAcLdg03iEBFAAAEEEEAAAQQQINy5BhBAAAEEEEAAAQQQ8ECAcPdgkzhEBBBAAAEEEEAAAQQId64BBBBAAAEEEEAAAQQ8ECDcPdgkDhEBBBBAAAEEEEAAAcKdawABBBBAAAEEEEAAAQ8ECHcPNolDRAABBBBAAAEEEECAcOcaQAABBBBAAAEEEEDAAwHC3YNN4hARQAABBBBAAAEEECDcuQYQQAABBBBAAAEEEPBAgHD3YJM4RAQQQAABBBBAAAEECHeuAQQQQAABBBBAAAEEPBAg3D3YJA4RAQQQQAABBBBAAAHCnWsAAQQQQAABBBBAAAEPBAh3DzaJQ0QAAQQQQAABBBBAgHDnGkAAAQQQQAABBBBAwAMBwt2DTeIQEUAAAQQQQAABBBAg3LkGEEAAAQQQQAABBBDwQIBw92CTOEQEEEAAAQQQQAABBHI23JetXCNTP3NRrx0aXlctk7YbL2eefJTsvutOXu7gb574q3z12jv7Pfay0rj847H+//5An/QnT/yKTJk8Sa69bMZAvxTzEUAAAQQQQAABBLIUyPlwn/apfeWoQ/YJTyedScvylWvlF795Sl545XWZM/scOXi/3bI8Vftl077wNTn/i8fJAXt/xGpYV7h/+ewTZPttx/WaVRwtkr12+6DVa2T75IamZtn7yJny/O++L+VlpeHTfvuHv0n9sBrZY9cPZDuGdQgggAACCCCAAAIDLJDz4X7uF46Rsz531CYMbe0dctjJl8rI4bVy//e/bkyUSCQlFivO6vktre2yx+Fnya3XnO8s3O+99XKZMnmHrF4/WJRKpSUSiUhRUSTr52xp4V/+/rKcdemNm4T7lp6Tzd/X2GYzjzUIIIAAAggggEChC3gZ7sGmfemym+Xl/74lf5l/a7iH7y5eLjff+Qv5579fk8b1LWHUHzZ1T5n5+U93x/nXvv1D+c9r78jpJx4u1373J3LAXh+Rb371i+Hz75v/B7nvV38I55SXl8q+u+8il5x9vIwYXivPvbBATrvwW93Xysa3svzpry/IHff+Rl57c1EY1ZMmjJMZJx0pU/ed0u+11fWO+5bCfeny1XLQ8RfLty4/Q+Y/9n/y/EsL5Hc//Y6MG10vW3rdlavXyQHHXiDXX3m2vPjq6/LYn56TltY22XH7reXKCz8nO03cWr7341/J3Hm/7j7O/fb8sNz+rQul560ywQ8t3/3hg/LE08/L6jWNMmJ4jRxx8N4y87RpEiuOhs/fnG2h/0PG+SOAAAIIIIAAAi4EvA33o069PAzyB38wW9LpjHzyxC9LTXWlXHH+yRLcB7/gjXflsmvvlFOOO1TO/+KxodXVN94tT//tJdlq7Eg54+QjZfyYEbLN+FFheAdhGry7H8T+ilVrZfbN90gmnQ7nR4qK5J8vLZTTL/6OfPtrZ8rHPzZZamsqpevd6s8ccYCcdOxBEpGI3PvgE/LLR56WO75zsXx898l97lG24b5qTYPsf8z5suP2W8lB++0me+/2QfnApG3CHySCd8k397prG5rk40efK2NH18tZpxwlRxy8l6xvbpUzvnxD+APGL++6WlrbOuTHP/9dGPC/v/8Gqa6qkMqKsl7hHpz3qwvfkasuPFU+/MHt5aVX35Srb7o7vE3pmktP36yti4uUGQgggAACCCCAAAIiOR/uwbu6Z5x8RLhXmYzIylVrZd4vHpefPPh7uerCz8nxRx8Yhvt7S1eE92gH92Z3Pc678ruyZNnqMFKDxzVz7u18Z33ulbLLztuHf629IxEG7r57TJabZs3sfm7wbv4JZ88O37E+bOoe8srCt+X4M6+W7117QfetMqeef114z/3vfvrtMIaDR3A7yyEnXCLbbztW7rz+ks2G+103XCIf+eDEXmuKioqktCQuXfEd/AAQ/CDQ9cjmdbuee+gBu8tNs77U/dy7fvqIzLnrl/Li738Q/uDz4/t/Jzd8/+eb3Cqz8Tvu/3r5dTnl3G/K1y44RT776andc35436Phn3D84YGbZNSIuj5t+QcMAQQQQAABBBBAwJ1Azod7X6daU1UR3qZx0jEHdf/t/77+P/nBz34rwX82t7RJJpORpubW8N33J39+Y3e4//zhP8pLT/6o+z7xlxe8LSecdbXMuuTz4TvYGz/2OPxsOeKgvcJbS/oK948eeoZ88hO7d99u0/XcC79+m/zjpYXdt/H0PIctfavMbh/eUebdcll3uAfn+qVTj+4ek83rdoX7xWdNly+ccFj3c3/+6z+Gf5rw9EO3hD/kbCncf3T/o3Lj9x+QR3/y7fBPJ7oegfNxM74e/lAQ/HAQ/FDU09bdZcokBBBAAAEEEEAAgZwP9+Ad9WMO2zfcqeBWlLqaShkzanj3O9zBXw/e9f70aVfIVuNGymXnnhT+/eJoNIzJILg3DvdH//g3+evD3+ve+Wf/8ap88ZLrw/WRHh/6DD5gedC+H5VbvnFur3BPplLy4amny6mfOVS+MvOzm1xJX7/hx/LwE3+VF564q88rrCvcgx8IdthufK81lRXl4V/viu/Lzzu5+4eUbF+3r+cGL6QN91t+8KDc+ZPf9Pkh3sDn8vNOkpOOOTi07mnLP14IIIAAAggggAAC7gRyPtz7+laZnqcf3P4ShOPj910f3rfe9QiC/J1FyzYb7sG929PPnCXBVzPut9eHe8mWl5XI6BHD+nzHfbdPniGH7P+xXt93fv6Vt8qLr74Rvqvd1yPbe9z7i+9sXtdVuN/988fk+tvvl3u+e7nU1Vb1Op3htdVSU11BuLv7Z5JJCCCAAAIIIIBAnwJ5Ee7BO8LBO8N//+3t4Ycrg8eiJSvkiFMuC78B5ckHbgr/Wl/vCnd0JGSfo8+VaZ/6uATvbG/8ePN/S2S7rceE7+533Spz27Xnyyf23jVcFnxo893FK+Txn13ffetN8I548IujJu+0nQRrByLcs3ldbbg/9+j3paK883vcN77HPfgB5KSZ1/T6zvzgG2oaGpvDP93oz5Z/5hBAAAEEEEAAAQTcCeRFuHd9XWPwTTEnTpsqb7y9OPwA5oRtxoRfgzj/R9fIuDEj5Nu3/azP2zmCb5W5fd58uejM6bL/Xh+RjkQi/CVP9//6j/LAHbPCr04MfhAIgja4LSS4dWf7bcaGXz0ZvKsf/P+nTv+kJJOp8FtafvvkszLvluA72icNSLj/7Z//2eLrZhvuDz36Z7nyOz8Kv3Iy+MaaiRPG9fpWmeAc33xncfiDzc47bBt+685tP/qV/G/xcnnknuvCD9Jyq4y7fyiZhAACCCCAAAII9CWQF+EenFjwbSk/fehJaWxqDuPy0nNOlOA2lzO/fIO0tnfIPbdcJvfN/2O/92Fv/D3uJSVx+dCOE+TsU4+W4IOiXY8rvvUD+d0f/x7eGvKrH14TfiXk08++FEb/wrfek6JIJHztmad9WvacsnO/V5ztrTLB4C29brbhHvzm1MAoOP7gB40f3viVPr/H/dYfPSRPPPW8rFyzTmqrK8Pzu/CMz/COO/9eQQABBBBAAAEEBkkgZ8N9kM6fl0EAAQQQQAABBBBAwAsBwt2LbeIgEUAAAQQQQAABBApdgHAv9CuA80cAAQQQQAABBBDwQoBw92KbOEgEEEAAAQQQQACBQhcg3Av9CuD8EUAAAQQQQAABBLwQINy92CYOEgEEEEAAAQQQQKDQBQj3Qr8COH8EEEAAAQQQQAABLwQIdy+2iYNEAAEEEEAAAQQQKHQBwr3QrwDOHwEEEEAAAQQQQMALAcLdi23iIBFAAAEEEEAAAQQKXYBwL/QrgPNHAAEEEEAAAQQQ8EKAcPdimzhIBBBAAAEEEEAAgUIXINwL/Qrg/BFAAAEEEEAAAQS8ECDcvdgmDhIBBBBAAAEEEECg0AUI90K/Ajh/BBBAAAEEEEAAAS8ECHcvtomDRAABBBBAAAEEECh0AcK90K8Azh8BBBBAAAEEEEDACwHC3Ytt4iARQAABBBBAAAEECl2AcC/0K4DzRwABBBBAAAEEEPBCgHD3Yps4SAQQQAABBBBAAIFCFyDcC/0K4PwRQAABBBBAAAEEvBAg3L3YJg4SAQQQQAABBBBAoNAFCPdCvwI4fwQQQAABBBBAAAEvBAh3L7aJg0QAAQQQQAABBBAodAHCvdCvAM4fAQQQQAABBBBAwAsBwt2LbeIgEUAAAQQQQAABBApdgHAv9CuA80cAAQQQQAABBBDwQoBw92KbOEgEEEAAAQQQQACBQhcg3Av9CuD8EUAAAQQQQAABBLwQINy92CYOEgEEEEAAAQQQQKDQBQj3Qr8COH8EEEAAAQQQQAABLwQIdy+2iYNEAAEEEEAAAQQQKHQBwr3QrwDOHwEEEEAAAQQQQMALAcLdi23iIPNJYMnq1nw6Hc4FAQQQQAABY4Gxw8uMn1uITyTcC3HXOechFSDch5SfF0cAAQQQyCEBwl23GYS7zovVCFgLEO7WhAxAAAEEEMgTAcJdt5GEu86L1QhYCxDu1oQMQAABBBDIEwHCXbeRhLvOi9UIWAsQ7taE3g8YM6xMIhGRpWtaJZPx/nQ4AY8FYtGI1FbGZWVDu8dnwaH7LEC463aPcNd5sRoBawHC3ZrQ+wGEu/dbmDcnQLjnzVZ6eyKEu27rCHedF6sRsBYg3K0JvR9AuHu/hXlzAoR73myltydCuOu2jnDXebEaAWsBwt2a0PsBhLv3W5g3J0C4581WensihLtu6wh3nRerEbAWINytCb0fQLh7v4V5cwKEe95spbcnQrjrto5w13mxGgFrAcLdmtD7AYS791uYNydAuOfNVnp7IoS7busId50XqxGwFiDcrQm9H0C4e7+FeXMChHvebKW3J0K467aOcNd5sRoBawHC3ZrQ+wGEu/dbmDcnQLjnzVZ6eyKEu27rCHedF6sRsBYg3K0JvR9AuHu/hXlzAoR73myltydCuOu2jnDXebEaAWsBwt2a0PsBhLv3W5g3J0C4581WensihLtu6wh3nRerEbAWINytCb0fQLh7v4V5cwKEe95spbcnQrjrto5w13mxGgFrAcLdmtD7AYS791uYNydAuOfNVnp7IoS7busId50XqxGwFiDcrQm9H0C4e7+FeXMChHvebKW3J0K467aOcNd5sRoBawHC3ZrQ+wGEu/dbmDcnQLjnzVZ6eyKEu27rCHedF6sRsBYg3K0JvR9AuHu/hXlzAoR73myltydCuOu2jnDXebEaAWsBwt2a0PsBhLv3W5g3J0C4581WensihLtu6wh3nRerEbAWINytCb0fQLjrtnBVc7tkMv0/Z0RliW4gq7sFCHcuhqEWINx1O0C467xYjYC1AOFuTej9AMJdt4ULVzRJZjPlvsPIKimKRHRDWR0KEO5cCEMtQLjrdoBw13mxGgFrAcLdmtD7AYS7bgs3fsd9dXN7+OThFXER6Yx13nHXeW68mnA3t+OZbgQId50j4a7zYjUC1gKEuzWh9wMId/MtXLi8UYK7ZniX3dyQcHdjxxQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2fT2Td9zdejJNL0C468wId50XqxGwFiDcrQm9H0C4m28h4W5uR7i7tWOaGwHCXedIuOu8WI2AtQDhbk3o/QDC3XwLCXdzO8LdrR3T3AgQ7jpHwl3nxWoErAUId2tC7wcQ7uZbSLib2xHubu2Y5kaAcNc5Eu46L1YjYC1AuFsTej+AcDffQsLd3I5wd2vHNDcChLvOkXDXebEaAWsBwt2a0PsBhLtuC1c2t0trRyp80nvrWsL/HFtT1v3d7fUVJVIej+qGsjoU4MOpXAhDLUC463aAcNd5sRoBawHC3ZrQ+wGEu24LF69rlab2RPikZY1t4X+OqiqRyIZfujS2tkyqS2K6oawm3LkGckKAcNdtA+Gu82I1AtYChLs1ofcDCHfdFrYn05La8JtTX1y0VjpSafnA6GqpKu2M9ZLiIonym1N1qBtW8467ERtPcihAuOswCXedF6sRsBYg3K0JvR9AuJtv4d/eXiVtybR8ZHyt1JYFvz2Vh40A4W6jx3NdCBDuOkXCXefFagRCgXUN6+WwUy6V808/Vo4/+sBeKiecPVsWvP4/kQ3vAlZXlsuff/XdcB3hzkVEuJtfA4S7uV1fzyTc3XoyTS9AuOvMCHedF6sRCAUuv+4uee7FBTLjxMP7DPfDT/mq3DL7XJk4YVwvMcKdi4hwN78GCHdzO8LdrR3T3AgQ7jpHwl3nxWoE5LkXFsjcefNl4rbjZNKEcX2G+/7HnC8/v+PrMnrEMMKda6aXAOFuflEQ7uZ2hLtbO6a5ESDcdY6Eu86L1QUukEgkZfqZs+TGWTPlZw892W+473rIDNlvj13kXy+/JsPqquWiM6bL/nt9ONTjHfcCv4hEhHA3vwYId3M7wt2tHdPcCBDuOkfCXefF6gIXmHv3fMlkMjLztGlyzZx7+wz3dDojV37nh3LQfh+Vj+++i/zfc/+Wr3zj+/LwvOtkzMhhvcK9rpIP2BXaZVVW0vmd463tnd9NziN7gT8tXC4tHSnZa/vhMqy8JPsnsrJPgaKISKy4SNoTaYQQGBSBtes7Nnkdwl3HTrjrvFhdwALvLFomF189V+6be6XE47F+w70voi9c+G055rD95IiD9+oV7l0RV8C0BXfqtZVxiQQfcl7fIZmCO3u7E/7L6yukNZmWj21TJ3WEux2miESLIlJRWiyNLZ3fk88DgYEW6PmGBeGuEyfcdV6sLmCBux94TO6452GJxYpDheaWNolGi+TEaQfJBTOO65ZpaW2X195aJB/54MTuv/a5866Vk445WA494GPcKlPA11DXqXOrjPlFwK0y5nZ9PZNvlXHryTS9AOGuMyPcdV6sRqBboOetMo88+azsOWXn8N34qZ+5UG6++hz5+O6T5f+ee1m+PPt2eeTeb8nwumrCnWuIe9wtrgHC3QKvj6cS7m49maYXINx1ZoS7zovVCPQb7vtNO0/mzD5HpkzeQf7y95fl+tvvl+Ur18j4MSPkKzM/K3vs+oHwuXw4lYuId9zNrwHC3dyOd9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRCAXWNayXw065VM4//Vg5/ugD+1Xpax3hzkVEuJtfA4S7uR3h7taOaW4ECHedI+Gu82I1AqHA5dfdJc+9uEBmnHj4ZsO9r3WEOxcR4W5+DRDu5naEu1s7prkRINx1joS7zovVCMhzLyyQufPmy8Rtx8mkCeP6Dff+1hHuXESEu/k1QLib2xHubu2Y5kaAcNc5Eu46L1YXuEAikZTpZ86SG2fNlJ899GS/4b65dYR7gV9EIkK4m18DhLu5HeHu1o5pbgQId50j4a7zYnWBC8y9e75kMhmZedo0uWbOvf2G++bW9Qz3eKyowFUL7/SHV5dIRERWN7ZLpvBO3+qMn3ljpbQmU/LRrYdJXXncahZPFikuikhlWUzWNXfAgcCgCHQk0pu8DuGuYyfcdV6sLmCBdxYtk4uvniv3zb1S4vFYv+G+pXU9w72+uqSAVQvz1Lt+WOv5P2CFqaE76z/8d5m0JFKy9/b1MryCf3Z0er1XRyIixdGIJJL8CGlryfOzE1jV2E64Z0fV5yrC3QKPpxaWwN0PPCZ33POwxGLF4Yk3t7RJNFokJ047SC6YcVw3xpbWcatMYV03fZ0tt8qYXwPcKmNu19czY9GI1FbGZWXDpjHl9lWYhkD/Arzjrrs6CHedF6sR6BboeavMI08+K3tO2Vnqh9VsotRzHeHORUS4m18DhLu5HeHu1o5pbgQId50j4a7zYjUC/Yb7ftPOkzmzz5Epk3cg3LlONitAuJtfIIS7uR3h7taOaW4ECHedI+Gu82I1AtYCvONuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN9/CrnCfMLxCyuPF/Q4aXh6XoqKI+QsVyDNj0YjUVsZlZUN7gZwxp5lrAoS7bkcId50XqxGwFiDcrQm9H0C4m29hV7jXlcekpDja76CJI1TcF6wAACAASURBVKqkWBHuq5vbpbkj1e+8YeVxqSzp/wcF8zMa2mcS7kPrz6uLEO66q4Bw13mxGgFrAcLdmtD7AYS7+Rb29Y77mpYOyWQyEsR1JNL5Lrv2Hfdlja2yrjXR74GNri6T2rKY+YHn6DMJ9xzdmAI6LMJdt9mEu86L1QhYCxDu1oTeDyDczbewr3vcX1/ZJKl0RibWV0pxtMhoeEcqI8l0OnzumuZ2Wd+elOEVJVKx4V32eLRI9Q6+0UEMwZMI9yFA5yU3ESDcdRcE4a7zYjUC1gKEuzWh9wMId/MtHKhw3/iIlja0SkNbQkZXl0ptWdz8YD14JuHuwSbl+SES7roNJtx1XqxGwFqAcLcm9H4A4W6+hQMR7i0dKVnV/P6HM4N33FsSqTDag/vay2JRGVFZYn7QOfxMwj2HN6dADo1w12004a7zYjUC1gKEuzWh9wMId/MtHIhwX93SIYvXtXQfVGNbQtoSKakqDaK9WGrKY7JNbYX5QefwMwn3HN6cAjk0wl230YS7zovVCFgLEO7WhN4PINzNt3Agwn1pY5usXN8WHlR7Mi2rmtokuNu9vjIehvvIytLwtpl8fBDu+birfp0T4a7bL8Jd58VqBKwFCHdrQu8HEO7mWzgQ4b62pUOa2pPhQTW0dMh761rCb6fZelhFeKtMbXlMqkvy7xtlgvMl3M2vRZ7pRoBw1zkS7jovViMQCqxrWC+HnXKpnH/6sXL80Qf2Unl5wdtyzc33yFvvLpXRI+rk4rOOlwP2/ki4jnDnIiLcza+BgQj3jY/mrVXrZeHyRimNR2XX8XV8ONV8q3gmAlkJEO5ZMXUvItx1XqxGIBS4/Lq75LkXF8iMEw/vFe7B90lPnX6RXDjjM3LEwXvJU8++KF+efbs88/D3pCQeI9y5hoRwN78ICHdzu76eyTvubj2Zphcg3HVmhLvOi9UIyHMvLJC58+bLxG3HyaQJ43qFe1t7hzz+1PNy9KH7dGtNOWSGPDzvWhk/ZgThzjVEuFtcA4S7BV4fTyXc3XoyTS9AuOvMCHedF6sLXCCRSMr0M2fJjbNmys8eerLPcN+YKFj/0KN/lvvm/1Ee/MFsiUaLCPcCv4aC0+cdd/OLgHA3t+Mdd7d2THMjQLjrHAl3nRerC1xg7t3zw1+tPvO0aXLNnHs3G+5/+usLcu4V35VR9XUy5xvnyuSdJoR6Pe9xH1GTn98PXeCXymZPP1bc+ds9E8nO39TJI3uBJ/+7LPyO9X22rw9/s2nweGVxgyTSafnQ2BqJKX9zanN7UjIbvfzry5vk1aUNUh6Pym7bDJeth5Vnf3AeroxERKJFEUmmNlbw8EQ4ZG8EVja8/zsTgoMm3HVbR7jrvFhdwALvLFomF189V+6be6XE47EthntAlUyl5PkXFsil37xD7r/9Khk7ur5XuHdFXAHTFtyp19eUSEREVjW0bxKNBQdhcMLPvLky/I71KdsMk7oNv9U0+DBpKp2RSSOr1OH+2oomSabe/wFqRVObBL85NV4cDaN9162GSXFRsFv5+QjOrao8JmvXd+TnCXJWOSfQ8w0Lwl23RYS7zovVBSxw9wOPyR33PCyxWHGo0NzSFt76cuK0g+SCGcd1y6xe2yjP/uPV8IOpXY/PX/AtmX7kJ+SwqXtwq0wBX0Ndp86tMuYXgetbZRava5VUpvPd5paOpAThvrK5TUqiUdmuvkp2HFUl0eBt6Tx9cI97nm6sR6dFuOs2i3DXebEagW6BnrfKPPLks7LnlJ3DsD9o+kVy06yZsu8eu8jCNxfJ5867Vn5y2xUyacJ4wp1riHvcLa4Bl+GeSqdlTUui+2gWrW2RVevbwltxSouj8oHR1bLNsPz8jaldJ024W1yMPNWJAOGuYyTcdV6sRqDfcN9v2nkyZ/Y5MmXyDvKXv/9bbrrjAVmyfLXUVlfKGScfKccevl/4XL7HnYuId9zNrwGX4d6Ryshbq5q6DyZ4t31dayK8FackViQThlfKLmNrzQ/Wg2cS7h5sUp4fIuGu22DCXefFagSsBQh3a0LvBxDu5lvoMtw3fsc9nUnLwuVN0tCWCO+X5x138z3imQhoBAh3jZYI4a7zYjUC1gKEuzWh9wMId/MtdBnuGx9FRyotwezGtqREIhkpjxfzm1PNt4lnIpC1AOGeNVW4kHDXebEaAWsBwt2a0PsBhLv5FhLu5nZ9PZNbZdx6Mk0vQLjrzAh3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLbQN99XN7ZLO9H79RCotryxtkI5kWiKRjJTHi2XX8XVSWxY3P1gPnhmLRqS2Mi4rG9o9OFoOMR8FCHfdrhLuOi9WI2AtQLhbE3o/gHA330LbcH9tRZOkM73LPZnOyFur1ktRRCQSEcLdfIt4JgIqAcJdxSWEu86L1QhYCxDu1oTeDyDczbfQNtw3fsc9+O/BY3h5XBLpDO+4m28Lz0TAWIBw19ER7jovViNgLUC4WxN6P4BwN99C23Df+JVfW9EY3jYzaUSVpDIZCWY3tiW5VcZ8e3gmAmoBwl1HRrjrvFiNgLUA4W5N6P0Awt18C3uG+5qWdnllSUMY4CMq4xItKtpkeG1ZTEZXl/X5goS7CPe4m1+LPNONAOGucyTcdV6sRsBagHC3JvR+AOFuvoWEu7ldX88k3N16Mk0vQLjrzAh3nRerEbAWINytCb0fQLibb+HmbpUZVhGTNc0J2dy77Bu/Mu+48467+ZXIM10JEO46ScJd58VqBKwFCHdrQu8HEO7mW0i4m9vxjrtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxeggF1je3ykOP/lneXrRM2ts7eh3JtZfNGMKjy/6lCffsrfJ1JeFuvrOEu7kd4e7WjmluBAh3nSPhrvNi9RAKnP3Vm+XNdxbLlF12kFhxca8j+cZXvjBoR7euYb0cdsqlcv7px8rxRx/Y63WD45x14zxZ+Oa7Uj+sRi45+wQ5cJ9dw3WE+6BtU86+EOFuvjWEu7kd4e7WjmluBAh3nSPhrvNi9RAK7H/M+fK7n35HystKhvAoOl/68uvukudeXCAzTjy8z3A/+rQr5LjD95eTjjlYnnn+Fblo1m3y51/dKmWlccJ9yHdv6A+AcDffA8Ld3I5wd2vHNDcChLvOkXDXebF6CAU+fdrX5Fc/+oZEIpEhPAqR515YIHPnzZeJ246TSRPG9Qr3ZColv/rdX2Tap/aV4mg0PNY9Dj9bfnHn1bL1uJGE+5DuXm68OOFuvg+Eu7kd4e7WjmluBAh3nSPhrvNi9RAKPPzEM7LwjUUy46QjpLamckiOJJFIyvQzZ8mNs2bKzx56ss9w73lgL//3LTn/qlvlyZ/fJEVFEcJ9SHYut16UcDffD8Ld3I5wd2vHNDcChLvOkXDXebF6CAUO/eyXZcXqddLRkZDSkrj0fOP9H4/dOeBHN/fu+ZLJZGTmadPkmjn3bjHc31u6Us748g1y5QWfk712+2B4fD3vcS8v6X2//oCfCC8wpAI1lTEJ/txo3frEkB6Hjy/+59dXSGsyJbtvM0zqyjtvm1uwrFGS6bTUV5bIqvXtUlcel3G15Vs8vf8sbZB0JiMfGF0jyXRG/vLGCmlo7Qj3pqIkJh/bZpgMqxj6W/O2eCIWC6JFIuWlxdLUkrSYwlMRyF6gpX3Ta41wz94uWEm467xYPYQCTz/7khQVFfV7BPvuMXlAj+6dRcvk4qvnyn1zr5R4PLbFcF/45iI5/8pb5avnnCgH7P2R7mPrGe61lbEBPW6G555A1w9rPf8HLPeONPeO6E8LV0hLR1L22n64DNsQ7q8uaQjDe2RVXFY0dcjwiriMr9tyuL+yZJ2k0iIfGtsZ7n9auFzWtSTCNwUqS4plz+2Gy/A8D/eiSETixUXSlkjl3mZzRHkp0PMNC8Jdt82Eu86L1QUscPcDj8kd9zwssVjnO+TNLW0SjRbJidMOkgtmHLeJzKIlK2TGJTdI8BWVUyZP2uTv8a0yBXwRbTh1bpUxvwa4Vcbcrq9nxqIRqa2My8qGdreDmYZAlgKEe5ZQG5YR7jovVg+ywAVX3SbnnDZNJk4YJ8F/39xjzuxzBvXoet4q88iTz8qeU3YOv/7x8xd8S44/6hPyqQP36HVMhPugblNOvhjhbr4thLu5HeHu1o5pbgQId50j4a7zYvUgC1x360/lpGMOkq3HjZLgv2/ucdm5Jw3q0fUM9/2mnSfBDw8j6+skuB+/6535roO64aqz5aB9P8qHUwd1l3LzxQh3830h3M3tCHe3dkxzI0C46xwJd50Xq4dIIPiKxeBbXI47Yn8pLysdoqNw87K84+7G0ecphLv57hHu5naEu1s7prkRINx1joS7zovVQyiwz9HnyE9v+5psu9XoITwK+5cm3O0NfZ9AuJvvIOFubke4u7VjmhsBwl3nSLjrvFg9hAK/fvwZefQPf5PDpu4pW40dKfH4pl+j+KEdJwzh0WX/0oR79lb5upJwN99Zwt3cjnB3a8c0NwKEu86RcNd5sXoIBT54wOc3++qvPnX3EB5d9i89GOH+7ppmaUmkZKu6cqno8QNO9kfKyoESINzNZQl3czvC3a2dy2ltiaS8s6Yl/GrO7YYPzS8YdHk+mlmEu0aL73HXabF6SAXWN7dKcXFUIj1/89KGoyqJ+/F96LkS7mtaOiSVzsjw8nj4G115DJ4A4a63bk+mJYj2N1eul1QmI+NqymTqTqOlpLhIXl/ZFF7LwypisqY5IbVlMRldXbbFF3ltRaOkMyKTRlSFM4P5jW1JiUQyUh4vll3H10ltWXyLc3xewNdBDs7uBW+kNLcnpTwe7fPNFMJ9cPYhH16Fd9zzYRcL4ByCD6de+PXvyTWXni41VRVen3GuhPsbK5vCXzqz/fBKiRX3/4utvMbO0YMn3PUb89TrK+T1FU2bPHFsdZkcPnks4a7n7H4G4W6Bp3jqqub27t/qO6qq9xcsEO4KzAJfSrgX+AXg0+kf+bnL5MoLT5Xdd93Jp8PudayDGe6bg1rR1Ba+2ziiskSivOM+qNdUTUXnnw41tCREMoP60t6+2HPvrJbgXfeej30njpCua7kiHpXmjpSUxYqkJot3ypc3tUkmIzKyqiT8Z+GtVeu7f4NocMvC1nXl4Tvv+fwI/tkvK4nK+tZNfw19Pp/zUJzb+vakBP8XvONeXdr/nw5zq8xQ7I5fr0m4+7VfBX20P77/d/LL3z4tu35oUueHUzf8BtMulNNO+JQXPrkT7u2SzgS3BPR/+5EXoB4eZGVpsQR3fAWxRLdnt4EvL14X3g7T87HjqGppTaQkIxkpjRVJWyId3j5TWbLlW+fWNLeH/sPK42G4L2lolfZESiQiEiuKyKjqMimNRbM7QE9XRSMiJfGotLSnPD0DPw47kUpLRzItwQ+XVYT7JpvGPe66a5hw13mxeggFjv3iVRIrjkpYPH087r/9qiE8uuxfejDDfXMfTu26VSb7I2elKwHecddL9veO++SxtdKRSoXhzTvuelfecdeb2Tyjrjwu3CqzqSDhrruiCHedF6sRsBbInXBfL8l0WurK+HCq9aYqB9RXl4Q/f65qbA9v1eCxZYFXlzb0uMc9I5KJyMcnjgjfcQ8+XFpTGpWGtpRUlURleMWWf1Fb8O1Lwc03W9eWh89/ZWlD+AHCYG9KiqOy48iqzb47uuWjzv0VxUURqSqPydr1Hbl/sB4fYVuy88OpwZ/ujOQe9012knDXXdiEu86L1UMo8Ie//KvfVw8+vHroAR8bwqPL/qVzJ9z5cGr2u+Z2JR9O1Xs2tSXloRcXSUfq/fvcx9SUyREf4sOpes33n8GHU230sn8uH07t34pwz/46ClYS7jovVg+hwN5Hzdzk1TPpjDSub5HSkriMHTVcfnPPdUN4dNm/9GCEezZHw7fKZKM0MGsIdzPXIN7/+Nryzm9Dqq+Qj4yvCwfxdZBmnsGzCHdzO80ztxTumln5tpZw1+0o4a7zYnWOCbS0tsnt8x6WCVuPlmMO2y/Hjq7vw8mVcOd73IfuciHcze35BUzmdn09k3B369nftC19j/vgHEVuvgrhrtsXwl3nxeocFfj0aV+T+T++JkePbtPDypVw9wIrTw+ScDffWMLd3I5wd2vHNDcChLvOkXDXebE6BwVaWtvlUyd9RZ5+6JYcPLreh0S4e7FNA3qQhLs5L+Fubke4u7VjmhsBwl3nSLjrvFg9hAKXXnNHr1dPJJPy8oK3ZaeJW8ut15w3hEeX/UsT7tlb5etKwt18Zwl3czvC3a0d09wIEO46R8Jd58XqIRS4+sa7e716SUlcJmw1Wo48ZB8pLysZwqPL/qUJ9+yt8nUl4W6+s4S7uR3h7taOaW4ECHedI+Gu82J1DgikUmmJRovCI0kkkhLr8RtUc+AQN3sIhHuu79DAHx/hbm5MuJvbEe5u7ZjmRoBw1zkS7jovVg+hwHtLV8olV8+Vk487RI44aK/wSO649zfyp2f+JTfOminjRtcP4dFl/9KEe/ZW+bqScDffWcLd3I5wd2vHNDcChLvOkXDXebF6CAW+eMn1MmJYrVx81nSpH1YTHsnqtY1y852/kBWr1sqd118yhEeX/UsT7tlb5etKwt18Zwl3czvC3a0d09wIEO46R8Jd58XqIRT46KFnyB9/ebPUVFVschRr1jXJISdcLP947M4hPLrsX5pwz94qX1cS7uY7S7ib2xHubu2Y5kaAcNc5Eu46L1YPocD+x5wvt117gUzeacImR/HsP16Vy667S556cM4QHl32L024Z2+VrysJd/OdJdzN7Qh3t3ZMcyNAuOscCXedF6uHUCC4n/2nD/1ejjp0Hxk/ZoSk0xl5639L5OEnnpEZJx0R/p8PD8Ldh13qPMb17QlZ05KQinhUhle4+9Yiwt38GiDcze2GMtyb2hOytiUhVSXFUlced3sSTPNagHDXbR/hrvNi9RALPP7U8/LQo3+WRUtWhEey9biRcuzh+8vB++02xEeW/csT7tlbDfXKda0dsqyxTWpKYzKmpszZ4RDu5pQ9w31JQ6u8urRBEqm0jKoqlYqSYqkti8no6i3v12srGiWdEZk0okpSmYwEsxvbkhKJZKQ8Xiy7jq+T2rL8jsxYNCK1lXFZ2dBuvilZPHNNS7usaGrPem+yGMmSPBEg3HUbSbjrvFiNgLUA4W5NOGgDCPdBo876hTYO9xVNbfL06ys3ee7Y2jL56FZ1hHuWooR7llAsGzABwl1HS7jrvFiNgLUA4W5NOGgD1rUmZFljqxQXFUm8uPN3B7h4DKvqfBd37foOyWRcTCycGQuXN0pHKiPb1VfIq0saZW1L73eKd992eFa3Yyxe1yIB/9iasvCd9wXLG6W1IyUSyUhJcVS2r6+UinhxXuMWF0WkorRYGloSA3qeiXRaEsm01JbHZHTVlv80ZEAPhuE5JUC467aDcNd5sRoBawHC3Zpw0AZ0vePu+gVrKmLhyDCWBjjck+mMtCZSEgRaWSzq+lQGfd5bq9ZLIp2RrerKZMHSJmnuSPY6hl3G14a3N23psbypLfzBaWRVSRjuwey2ZEoiIuEPalvVlUt5jv6Ct/ZkWjpSaSkpLpL4hl9It6Xz7evvR4ProiQq61t7O5rM29Jzsr2NaUtz+Pv5I0C46/aScNd5sRoBawHC3Zpw0AZ0veNeWVIswxx+OHVkbalEIiIr1nWG40A+gg/YBvfpl5cUy9gs7vseyGNxMfuf766R9lRaPjimRl5ctEbeW9u6ydjA9aNbD5MdR1Vv8eXeXNUU+k8YXhne4/6vd9dIU3sqvMe9LB6VD43J7geALb7QACxYub5dGlo7ZFh53OraLI5GpKY8JqubOgbgKN8f2dTWEX44lXfcB5TZy+GEu27bCHedF6sRsBYg3K0JB21APtzj3tSWkMUNrRL88DG+tnzQ7AbqhTa+xz2VysgjrywJ33l+/xH8JBQJvwXo8A+NDd+R7u/h84dTgz8tWNvSIfUVcamvLDXm5h53Yzqe6EiAcNdBEu46L1YjYC1AuFsTDtqAvAj39oQsXtca3vpRVbLl20cGDdfwhV5Zsk6C20R2HFUllSUxSaQy8tJ7a+W9tS2dE4P7XDY8Jo+rDe9T7+/x7ppmCZJ/69ry8B33V5Y2SHPwrTJFEt7jvuPIKqnK4pYbw1OxelpLRzK8BWpkVWn4rrvpg3A3leN5rgQId50k4a7zYjUC1gKEuzXhoA1IpoP7iDOdH06NblSElkcwmF8H2fWOu+Uh58zTN77Hvev+8wXLm2RlU1uvY9x6WIVsM6z/P2Xo8x73RCqcE/ygs3Vwj3uOfzjVl3fcg6/rDD6bUByJOP2gd85cmByIsQDhrqMj3HVerEbAWoBwtyb0fsCghnuev+MeXAz/Wdogr61o6nVd7DS6WnbazL3uvOMuMljvuHv/Dy0nMGAChLuOlnDXebEaAWsBwt2a0PsBgxrueXyPe9cvR3p9ZZM8/86aTb5hJvimlRN224Z73LfwTwvh7v2/Trw/AcJdt4WEu86L1QhYCxDu1oTeDyDczbew529ODSYF4d6eSEtTR0IaW5NSGiuSPbet32y0B8/jw6m8425+JfJMVwKEu06ScNd5sRoBawHC3ZrQ+wGDGe4dybQ0tCXCiK3O0Q9aaja0v3BPpTMyrCIma5oTku13hfsc7sH317d0pKSipFjKLb6fn3fcNVcfawdCgHDXqRLuOi9WIxAKrGtYL4edcqmcf/qxcvzRB/ap8siTz8rVN94t11z6RTn0gI91ryHcuYgGM9zzTZtwd7ujhLtbT6bpBQh3nRnhrvNiNQKhwOXX3SXPvbhAZpx4eJ/hfvcDj8k/X1ooK1evk9NOOIxw57rZRIBwN78gCHdzu76eSbi79WSaXoBw15kR7jovViMgz72wQObOmy8Ttx0nkyaM6zPcF7zxruy4/VbyxYuvl+lHfYJw57oh3B1dA4S7I8gNYwh3t55M0wsQ7jozwl3nxeoCF0gkkjL9zFly46yZ8rOHnuw33LuYTr/oO4R7gV8zfZ0+77ibXxSEu7kd77i7tWOaGwHCXedIuOu8WF3gAnPvni+ZTEZmnjZNrplzr5NwH11n/uvKC3w7sjr94LdqptIiHx5fK9Eid79EKasX72dR0YbjSKczNmMK8rm//88yae5Iyb6T6mV4RUlo8PLideFvUB1VXSLLG9ulvjIuwS9f2tJj42sjmc7IE/9ZKuuaE+FvX60qLZaPTxwh9ZWdr5G3j4hIUSQiXIub7nDXtbHLuBopjhbl7fYPxYktW7vpL0sj3HW7QLjrvFhdwALvLFomF189V+6be6XE4zFn4d4VcblE++7aFslkpNdvndz4rwe/CXFJQ5sUR0XG1Wz62ymDX8f+vzUtUhYrkm2H9/8r5zc+5yCcXl/RJMEvKN1hM780R+u0cHmjBH28w8iqnAn3UbWlEomILF/XFjrzyF7g2bdWSWsyJVO2qpOu73EPfvlS8K0ywytjsnp9QmrLYzKmuqzfoe3JtDz71kp5c+X6cM342nLZe/sR8s9Fa6SpNQj3jFTEY7LrVnVSVx7P/uA8XBkrikh1RUxWN3V4ePQDd8hd/96YNKJyUMK9NZGUd1a3SElxRLarr8r6xJY1tcna5g4ZWVXS/YNsX0/u+e/0FU1t0ppIy4iqkl7fStSWSEvwW4WDr1UdVeX+jaWePyQS7llvd7iQcNd5sbqABYIPnN5xz8MSixWHCs0tbRKNFsmJ0w6SC2Yc16eMr7fKLFjWIEFZ7jiySiJBYW54BP9jFnRmEMFBaAe/fj74H/7tR2z6PzRBuAf/Q1EWi8o2WbzzGYwP5r2xskmCN6N3GFnt7Erb+Cv/cuUdd26VMd9eF7fKPPX6ivCHxO5HRiT4ATod/BQVXOCRsN2lriIuh3xgTPjue74+uMe9753t+vfGxPrBCfe2INzXtEi8uEi2y/LNjuDIg8Be29IhIyo3H+49/52+aG1z+CdXwQ+tlSWbXt/BpilvVQAAIABJREFUV40uWtsSBn02f3Jl+88G4a4TJNx1XqxGoFug560ywdc/7jllZ6kfVtO9hnDPnXDPpUu3piIWHk5DS6IzFHlkLRD8sJhIZ2Sr2jIpj3cGR/DuYfCnKhXxaBgjwZ/01JT1/075c++skfZkqvdrboj2jf9GNBKR3bcdLsXBHwXl4SP4YbasJCrrW5N5eHb2p0S4b/mWM1tlwl0nSLjrvFiNQL/hvt+082TO7HNkyuQd5LgZX5c33lksyWRKokVFEimKyLevOEMOPWB38eF73BcsbwzPM3jHfON33Bevawk7M3hXKAil4J2eiER6RU0qlZHmhC4Egjc7+4wpy2suuKUn1x7BPcXBI3yHl4dKIJnKhNdgcNtxl2Nwm0zno7O8A96uv9fX8PaOlOrnpeB6z8Vb2lRwm1kc/DMefHaHR2+B4uDf34P5M1tEpDS4/1D5KI0WSXwzv4ir69+D9Rs+FxJ8JiSdSUvw/5f2eF4qlZb2VDr8wXjruk1vg1QeVlbLCfesmLoXEe46L1YjYC3gRbhvuFWm58kua3z/Q0WpTEbWt/cd50GQBvcRax8DEdldUdf5+bLB/F/g/s+ecNdeGe+vT6bSYXQXFwWB3rmfXXsckSDqtxzuiWS6+znZHEm+h3twexqfk970Skilg39/RcLP3AxuuWckFtWHe/DPQyyLD9FWlxaHb7Z0PYLPcAS/VbmvB7fKZPNvh8FfQ7gPvjmvWOACXoT7hnfct6otD/+0oOvxxqqm8E3NsTVlksiILF7bEn7gc0SPDzC1JVOysqld4sURGVXV/4cEN74Ugg8sLW5oCe9xH1fr7o9n3wv+lCATzCzb7Luwg3lZDquKhy2wpqmDD6cq4f+7rEE60mnZvr5KKjfcKhP8SVDww2JwL3pTW0oqSopkWHn/H6oL3m3879J14fUb/jgXkQ370Me9MiKyz8SRUl3WeXtTvj2CRqwqjXV+mw6PboGuf2+MrSkN/9R0oB8dyVR4v3rwDv+Ymuz+nRkc09rWDlnflgyvz5rS/q/RZQ2t4SlMGN7579ZVze3SnkiFr1Wx4Z+jrnNsS6TC2894x32gd91sPuFu5sazEDAW8CLc+XCq8f5m80Q+nJqNUt9rXHw4tWty1wcQh5WXyO8XLJWWjuC+903jfc8J9TJ57PufWzE/8tx8Jh9O7Xtf+HAqH07NzX9i+VaZXN0XjiuPBQj3vjd3oL5VJhcvJcLdfFcGItwnjaiS4NavYHZjWzIM+MqSqOy9XX33V06aH3FuP5Nwz4394VtlcmMffDgK3nH3YZc4xrwS8CHcg69zDO4fCO5x3PjRmuj8UF/w14N7YoNbYoIbaYIPsfLIXoBwz96q58rBCPdIJBPeJrDr+Pe/K978iHP7mYR7bu+Pq6Pr+e/09kRagn+bB/e3B9+ctPEjuG2xLZWWIomE3+U+0A8+nKoTJtx1XqxGwFrAh3C3PkkGbFaAcDe/QAh3c7u+nkm4u/Vkml6AcNeZEe46L1YjYC1AuFsTej+AcDffQsLd3I5wd2vHNDcChLvOkXDXebEaAWsBwt2a0PsBhLv5FhLu5naEu1s7prkRINx1joS7zovVCFgLEO7WhN4PINzNt5BwN7cj3N3aMc2NAOGucyTcdV6sRsBagHC3JvR+AOFuvoWEu7kd4e7WjmluBAh3nSPhrvNiNQLWAoS7NaH3Awh38y0k3M3tCHe3dkxzI0C46xwJd50XqxGwFiDcrQm9H0C4m28h4W5uR7i7tWOaGwHCXedIuOu8WI2AtQDhbk3o/QDC3XwLCXdzO8LdrR3T3AgQ7jpHwl3nxWoErAUId2tC7wcQ7uZbSLib2xHubu2Y5kaAcNc5Eu46L1YjYC1AuFsTej+AcDffQsLd3I5wd2vHNDcChLvOkXDXebEaAWsBwt2a0PsBhLv5FhLu5naEu1s7prkRINx1joS7zovVCFgLEO7WhN4PINzNt5BwN7cj3N3aMc2NAOGucyTcdV6sRsBagHC3JvR+AOFuvoWEu7kd4e7WjmluBAh3nSPhrvNiNQLWAoS7NaH3Awh38y0k3M3tCHe3dkxzI0C46xwJd50XqxGwFiDcrQm9H0C4m28h4W5uR7i7tWOaGwHCXedIuOu8WI2AtQDhbk3o/QDC3XwLCXdzO8LdrR3T3AgQ7jpHwl3nxWoErAUId2tC7wcQ7uZbSLib2xHubu2Y5kaAcNc5Eu46L1YjYC1AuFsTej+AcDffQsLd3I5wd2vHNDcChLvOkXDXebEaAWsBwt2a0PsBhLv5FhLu5naEu1s7prkRINx1joS7zovVCFgLEO7WhN4PINzNt5BwN7cj3N3aMc2NAOGucyTcdV6sRsBagHC3JvR+AOFuvoWEu7kd4e7WjmluBAh3nSPhrvNiNQLWAoS7NaH3Awh38y0k3M3tCHe3dkxzI0C46xwJd50XqxGwFiDcrQm9H0C4m28h4W5uR7i7tWOaGwHCXedIuOu8WI2AtQDhbk3o/QDC3XwLCXdzO8LdrR3T3AgQ7jpHwl3nxWoErAUId2tC7wcQ7uZbSLib2xHubu2Y5kaAcNc5Eu46L1YjYC1AuFsTej+AcDffQsLd3I5wd2vHNDcChLvOkXDXebEaAWsBwt2a0PsBhLv5FhLu5naEu1s7prkRINx1joS7zovVCFgLEO7WhN4PINzNt5BwN7cj3N3aMc2NAOGucyTcdV6sRsBagHC3JvR+AOFuvoWEu7kd4e7WjmluBAh3nSPhrvNiNQIqgXUN6+WwUy6V808/Vo4/+sDwuYS7ijAvFxPu5ttKuJvbEe5u7ZjmRoBw1zkS7jovViOgErj8urvkuRcXyIwTDyfcVXL5vZhwN99fwt3cjnB3a8c0NwKEu86RcNd5sRqBrAWee2GBzJ03XyZuO04mTRhHuGctl/8LCXfzPe4Z7k3tCXl1aaOkMxmpr4xLOi1SXFQk8eKi8EWqSoqlrjze5wu+tiJ4nsikEVWSymQkmN3YlpRIJCPl8WLZdXyd1Jb1/VzzM8itZ8aiEamtjMvKhvbcOjCOpmAECHfdVhPuOi9WI5CVQCKRlOlnzpIbZ82Unz30JOGelVrhLCLczfe6Z7ivbemQl5esCwN8RGVcokWdwd71qC2PyeiqMsK9H3LC3fxa5JluBAh3nSPhrvNiNQJZCcy9e75kMhmZedo0uWbOvZsN96ryWFYzWZQ/AlVlxeHJNLUm8+ekBulMnn5thbQmkrL7hOEyrLxEEsm0vLK0QZLpjEwaWSnF0U3DPVYUkZLiaJ9H9+qG4N95TE34/KdfWy4NrQmJREQq4sWyR/AaFSWDdGZD8zLRiEhpPCrN7amhOQBeteAEmloSm5wz4a67BAh3nRerEdiiwDuLlsnFV8+V++ZeKfF4bMvhviHitjiYBXkj0PXDWs//AcubExzAE+kM95TsPmFYGO7B479LGyWZTstOo6sl1iPcN3cory5tkHQ6I++H+wppaO2QSFEQ7jHZY9theR/uRUWRMNxb2vghcgAvW0ZvJNDzDQvCXXd5EO46L1YjsEWBux94TO6452GJxTrfVW1uaZNotEhOnHaQXDDjOL5VZouC+b+AW2XM93hzH06dWN/7HffNvRL3uItwq4z5tcgz3QgQ7jpHwl3nxWoE1AJbulVGPZAneC9AuJtvIeFubtfXMwl3t55M0wsQ7jozwl3nxWoE1AKEu5os759AuJtvMeFubke4u7VjmhsBwl3nSLjrvFiNgLUAv4DJmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18Cwl3czvC3a0d09wIEO46R8Jd58VqBKwFCHdrQu8HEO7mW0i4m9sR7m7tmOZGgHDXORLuOi9WI2AtQLhbE3o/gHA330LC3dyOcHdrxzQ3AoS7zpFw13mxGgFrAcLdmtD7AYS7+RYS7uZ2hLtbO6a5ESDcdY6Eu86L1QhYCxDu1oTeDyDczbeQcDe3I9zd2jHNjQDhrnMk3HVerEbAWoBwtyb0fgDhbr6FhLu5HeHu1o5pbgQId50j4a7zYjUC1gKEuzWh9wMId/MtJNzN7Qh3t3ZMcyNAuOscCXedF6sRsBYg3K0JvR9AuJtvIeFubke4u7VjmhsBwl3nSLjrvFiNgLUA4W5N6P0Awt18C23DfXVzu6Qzna8f/PfgMbw8Lol0Rl5Z2iAdybREIhkpjxfLruPrpLYsbn6wHjwzFo1IbWVcVjZ0WvBAYLAFCHedOOGu82I1AtYChLs1ofcDCHfzLbQN99dWNEk6s6HcNzqMZDojb61aL0URkUhECHfzLeKZCKgECHcVlxDuOi9WI2AtQLhbE3o/gHA330LbcN/4HfeNjyKRSvOOu/m28EwEjAUIdx0d4a7zYjUC1gKEuzWh9wMId/Mt7Ar3MTWlUhYrDge1dCTD/yyNRaUoeLtcRMbVlkl0w3/P5tU6UmkJZje2JblVJhsw1iDgSIBw10ES7jovViNgLUC4WxN6P4BwN9/CrnCvK49LSXFRv4MmjqiS4uC+lywfhDv3uGd5qbDMsQDhrgMl3HVerEbAWoBwtyb0fgDhbr6FXeG+0+gqqS7t/4Oj5bGo6kUId8JddcGw2JkA4a6jJNx1XqxGwFqAcLcm9H4A4W6+hX3d424+7f1nEu6Eu4vriBl6AcJdZ0a467xYjYC1AOFuTej9AMLdfAsJd3O7vp7J10G69WSaXoBw15kR7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYXeACLy94W665+R55692lMnpEnVx81vFywN4f6aWy8M1FcvWNd8sb7yyWrcaOlOsuP0N22G58uI5wL/CLSEQId/NrgHA3tyPc3doxzY0A4a5zJNx1XqwuYIFMJiNTp18kF874jBxx8F7y1LMvypdn3y7PPPw9KYnHumXS6YwcfspX5eRjD5bPfnqq/PKRp+QnD/5eHp53LeFewNfPxqdOuJtfCIS7uR3h7taOaW4ECHedI+Gu82J1AQu0tXfI4089L0cfuk+3wpRDZoRBPn7MiO6/tmTZKjn6tCvkuUe/L5FIJPzr+x9zvvzgxi/LpAnjece9gK+hrlMn3M0vAsLd3I5wd2vHNDcChLvOkXDXebEagVAgkUjKQ4/+We6b/0d58AezJRot6pZZumKNHPm5r8rzv7ujO9wPOeESuXTmiTJ13ym9wn1D2yNbQAKj68ok2Pdla1slkymgE3dwqs++vUrakmnZdXyt1JbFHUzsHNGRTEswu7EtKZFIRsrjxbLr+DqpK3f3Gs4O1uGgWFFEairjsqqx3eFURiHQv0DPf+cR7rqrhXDXebEaAfnTX1+Qc6/4royqr5M53zhXJu80YROV4JaaI0+9PLxN5oSjD5THnnpOrrjuLrn2sjPksKl79Ar34N1XHoUl0PXDGtGu3/cnXl0qLYmU7DtphAyvKNEP6OcZ7cm0PP7qUlnX0hH+UFVZEgtfo77S3Ws4O1iXgyIiwZ8Lci26RGXW5gSWrmnd5G8T7rrrhXDXebEagVAgmUrJ8y8skEu/eYfcf/tVMnZ0/SYywYdTv3HzPbJs5Ro5aN+Pykv/eVO+dOqnZd89JnOrDNcQH061uAa4VcYCr4+nxqIRqa2My8oG3nF3K8u0bAUI92ylOtcR7jovVhewwOq1jfLsP14NP5ja9fj8Bd+S6Ud+Inwnvb9HcFtNcI/7/B9/U0bW1xLuBXwNdZ0697ibXwSEu7ldX88k3N16Mk0vQLjrzAh3nRerC1igoalZDpp+kdw0a6bsu8cuEryr/rnzrpWf3HZF+KHTR558VvacsrPUD6uRz37pG/KlU4+WvXf7kHz/nl+H77jfef0loR5fB1nAF9GGUyfcza8Bwt3cjnB3a8c0NwKEu86RcNd5sbrABf7y93/LTXc8IEuWr5ba6ko54+Qj5djD9wtV9pt2nsyZfY5MmbyD/O2f/5HZN8+T4F36yR/YTq67bIaMGF5LuBf49cM77vYXgMtwT6bTsqShLTyodDot765tkYbWhHSk0lISK5IdRlTJDiOr7Q86hyfwjnsOb06BHBrhrttowl3nxWoErAV4x92a0PsBvONuvoUuw70jlZG3VjV1H8yKpjZZ15qQtkQqDPcJwytkl7F15gfrwTMJdw82Kc8PkXDXbTDhrvNiNQLWAoS7NaH3Awh38y10Ge7pTCb8asmux1ur18uKxjZZ35GUslhUJo+pkdHV+f2tT4S7+bXIM90IEO46R8Jd58VqBKwFCHdrQu8HEO7mW+gy3IOjWNPSIal055fpB/99eWNr+J8lxVHZcWSVbDusQoqKOn+RWj4+CPd83FW/zolw1+0X4a7zYjUC1gKEuzWh9wMId/MtdB3ub6xskuSGcA+OKrhdZnlTm8SiRbJ1XbnsMq5Oigl38w3jmQhsQYBw110ihLvOi9UIWAsQ7taE3g8g3M230HW4b/yOe3BU761rkf+taeYdd/Mt4pkIqAQIdxUX3+Ou42I1AvYChLu9oe8TCHfzHXQd7j2P5K1V62Xh8kYpjUdl1/F1UlsWNz9YD57JrTIebFKeHyLhrttg3nHXebEaAWsBwt2a0PsBhLv5FhLu5nZ9PZNwd+vJNL0A4a4zI9x1XqxGwFqAcLcm9H4A4W6+hYS7uR3h7taOaW4ECHedI+Gu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLibb+FAhHvwi5iC36IaPBavaZE3VjVJvLhIdh5TIzVlcQluJ4kVFZkfdA4/k1tlcnhzCuTQCHfdRhPuOi9WI2AtQLhbE3o/gHA338KBCPfg6x/XtnSEB9XakZJlja0SZPyY6lIpjxfLyKpSGVaenx9SJdzNr0We6UaAcNc5Eu46L1YjYC1AuFsTej+AcDffwoEI9yUNbbK0sTU8qOCXMTW0dkginZHq0lj4G1SHV8TDX8SUjw/CPR931a9zItx1+0W467xYjYC1AOFuTej9AMLdfAsHItwb2xOyZF1nuAePINxbE2mpLi0O33GvKo3JuJoy84PO4WcS7jm8OQVyaIS7bqMJd50XqxGwFiDcrQm9H0C4m2/hQIR7KpOR9mTnPe7BI7h1pqktISMqS8J73KMSkZIY97ib7xrPRKB/AcJdd3UQ7jovViNgLUC4WxN6P4BwN9/CgQj3nkeztKFVGtoSMrq6lF/AZL5VPBOBrAQI96yYuhcR7jovViNgLUC4WxN6P4BwN9/CgQr31c3t0tyRCg+sI5kOv2Um+GaZ4g3fJhN8OLWypNj8wHP0mdwqk6MbU0CHRbjrNptw13mxGgFrAcLdmtD7AYS7+RYOVLgH3ySzrjXR74GNri6T2rKY+YHn6DMJ9xzdmAI6LMJdt9mEu86L1QhYCxDu1oTeDyDczbdwoMJ94+9y7+vo4tHg3feI+YHn6DMJ9xzdmAI6LMJdt9mEu86L1QhYCxDu1oTeDyDczbdwoMLd/Ij8fibh7vf+5cPRE+66XSTcdV6sRsBagHC3JvR+AOFuvoWEu7ldX88k3N16Mk0vQLjrzAh3nRerEbAWINytCb0fQLibbyHhbm5HuLu1Y5obAcJd50i467xYjYC1AOFuTej9AMLdfAsJd3M7wt2tHdPcCBDuOkfCXefFagSsBQh3a0LvBxDu5ltIuJvbEe5u7ZjmRoBw1zkS7jovViNgLUC4WxN6P4BwN99Cwt3cjnB3a8c0NwKEu86RcNd5sRoBawHC3ZrQ+wGEu/kWEu7mdoS7WzumuREg3HWOhLvOi9UIWAsQ7taE3g8g3M23kHA3tyPc3doxzY0A4a5zJNx1XqxGwFqAcLcm9H4A4a7bwvZkWlKZTPikFxetlY5UWj4wulqqSjt/k2lJcZFEI/n3y5F0Smar+TpIMzee5U6AcNdZEu46L1YjYC1AuFsTej+AcNdt4eJ1rdLUngiftKyxLfzPUVUlEtkQ62Nry6S6pDPieegECHedF6vdCxDuOlPCXefFagSsBQh3a0LvBxDuui1c2dwurR2p8EnvrWsJ/3NsTZkUbQj3+ooSKY9HdUNZHQoQ7lwIQy1AuOt2gHDXebEaAWsBwt2a0PsBhLv5Fi5c3ijBTTM7jKzqDnfzaTyTcOcaGGoBwl23A4S7zovVCFgLEO7WhN4PINzNt5BwN7fr65mEu1tPpukFCHedGeGu82I1AtYChLs1ofcDCHfzLSTcze0Id7d2THMjQLjrHAl3nRerEbAWINytCb0fQLjrtnBVc7ts+FIZWd3cHj55eEVcRDq/SWZEZYluIKu7BXjHnYthqAUId90OEO46L1YjYC1AuFsTej+AcNdt4cIVTZLpKvc+nsr97jrPjVcT7uZ2PNONAOGucyTcdV6sLnCBlxe8LdfcfI+89e5SGT2iTi4+63g5YO+P9FJZ8Ma7MvumebJmXZOUlsTl4rOmy7577BKuI9wL/CISEcJddw1s/I57X8/kHXedJ+Fu7sUz3QsQ7jpTwl3nxeoCFgje8Zs6/SK5cMZn5IiD95Knnn1Rvjz7dnnm4e9JSXzT75A+6vNXyFmnHCWHTd1Dgoj/3HnXylMPzpHyslLCvYCvoa5TJ9y5CHJFgHfcc2UnCvc4CHfd3hPuOi9WF7BAW3uHPP7U83L0oft0K0w5ZIY8PO9aGT9mRPdfCwJ/l6lfkD//6rtSV1MV/vW9j5op9956hWy/zVjCvYCvIcKdzc81AcI913ak8I6HcNftOeGu82I1AqFAIpGUhx79s9w3/4/y4A9mSzRatInM6Rd9Rw7efzc54egD5V8vvyZf/ead8tuffFtixVHCnWuIW2W4BnJGgHDPma0o2AMh3HVbT7jrvFiNgPzpry/IuVd8V0bV18mcb5wrk3ea0Etl4ZuL5LQLvxX+SvaW1na54cqzZeq+U8J1Pe9xr6ngV7UX2mVVUVocnnJzW7LQTp3zzTGBoohISSza/Ztpc+zwOJw8FGhoTmxyVoS7bpMJd50XqxEIBZKplDz/wgK59Jt3yP23XyVjR9d3y7R3JOSIz10mX7/oVPn47pPDD7KedsG35N5bL5etx43qFe5dEQdt4Qh0/bDW83/ACkeAM80VgWhRRMpKorK+lR8ic2VP8v04er5hQbjrdpxw13mxuoAFVq9tlGf/8Wr4wdSux+cv+JZMP/IT4YdQux7/ff1/ctalN8nTD93S/de+eMn1ctQhe8tRh+zDrTIFfA11nTofTuUiyBUBbpXJlZ0o3OMg3HV7T7jrvFhdwAINTc1y0PSL5KZZM8Ovdgxuhwm+LeYnt10hkyaMl0eefFb2nLKzxOMxmfqZC+WHN35Fdtl5e1m5ep1M+8KVctcNl8gHJm1DuBfwNUS4s/m5JkC459qOFN7xEO66PSfcdV6sLnCBv/z933LTHQ/IkuWrpba6Us44+Ug59vD9QpX9pp0nc2afI1Mm7yBPP/uS3PKDX4b3twcfXD3luEPCD6oGD77HvcAvIr7HnQsghwQI9xzajAI9FMJdt/GEu86L1QhYCxDu1oTeD+BWGe+3MG9OgHDPm6309kQId93WEe46L1YjYC1AuFsTej+AcPd+C/PmBAj3vNlKb0+EcNdtHeGu82I1AtYChLs1ofcDCHfvtzBvToBwz5ut9PZECHfd1hHuOi9WI2AtQLhbE3o/gHD3fgvz5gQI97zZSm9PhHDXbR3hrvNiNQLWAoS7NaH3Awh377cwb06AcM+brfT2RAh33dYR7jovViNgLUC4WxN6P4Bw934L8+YECPe82UpvT4Rw120d4a7zYjUC1gKEuzWh9wMId++3MG9OgHDPm6309kQId93WEe46L1YjYC1AuFsTej+AcPd+C/PmBAj3vNlKb0+EcNdtHeGu82I1AtYChLs1IQMQQAABBPJEgHDXbSThrvNiNQLWAoS7NSEDEEAAAQTyRIBw120k4a7zYjUC1gKEuzUhAxBAAAEE8kSAcNdtJOGu82I1AtYChLs1IQMQQAABBPJEgHDXbSThrvNiNQIIIIAAAggggAACQyJAuA8JOy+KAAIIIIAAAggggIBOgHDXebEaAQQQQAABBBBAAIEhESDch4SdF0UAAQQQQAABBBBAQCdAuOu8WI0AAghYCdz100dk3gOPSzKVksOm7ilXnHeyRKNFVjN5MgJagY6OhOx6yAyJxYq7n3rgPruE00CWAAAJaElEQVTKTbNmakexHgEEBlGAcB9EbF4KAQQKW+Bv//yPfO07P5R5t1wmNVUVcvZXb5bDpu4hn/301MKG4ewHXWDVmgY5+rQr5Jlf3zbor80LIoCAuQDhbm7HMxFAAAGVwOyb75ExI4fJjJOOCJ/3p7++EL77fvecr6rmsBgBW4G3310a/uD42M++YzuK5yOAwCAKEO6DiM1LIYBAYQucfvF35ISjD5SD99sthAji6bQLvy1PPTinsGE4+0EX+Pd/3pRzv/ZdmbD1GHn97fdkx+22kqsuOlW23Wr0oB8LL4gAAtkLEO7ZW7ESAQQQsBI4aeY1cuYpR8p+e344nLNk2Sr59Be+Js89+n2ruTwZAa3Am+8slnt++YScOO0gmbDVaLn9noflT8+8IPN/fI12FOsRQGAQBQj3QcTmpRBAoLAFvnjJ9XLMp/YL72sPHgvfXCRnfuVG3nEv7MsiJ84++LD0boeeIY/fd4OMGlGXE8fEQSCAQG8Bwp2rAgEEEBgkgW/ecq/UVlfKzNOmha/46B/+Lg/+9mn54U1fGaQj4GUQ6BRYuXqdNDQ2y8QJ48L/P5FIykc/eYY8/dAtUldTBRMCCOSoAOGeoxvDYSGAQP4J/Ovl1+Qr3/i+3PPdy6WiokzOuOQGmX7UJ+TYw/fLv5PljHJa4K//eEW+9u0fyr23XiGjRwyT2+f9Wv7v+Zfl/tuvyunj5uAQKHQBwr3QrwDOHwEEBlVg3i8elx/89BFJJFPy6U9+XC6d+VmJRCKDegy8GAKBwI/v/53c++AT0tbWIZM/sF344dRxo+vBQQCBHBYg3HN4czg0BBBAAAEEEEAAAQS6BAh3rgUEEEAAAQQQQAABBDwQINw92CQOEQEEEEAAAQQQQAABwp1rAAEEEEAAAQQQQAABDwQIdw82iUNEAAEEEEAAAQQQQIBw5xpAAAEEEEAAAQQQQMADAcLdg036//btP8brOQ7g+CtTxiSS6ai4KInWZqQYZX6Fw2yxi2FK+iFarV9Sq/VDKb9SrpyLxlSmH9IshM1aSCpqaGvTqF250qRS6Hb2/Wzftkphu7N7n8f9d91333t9H6/XH8+++54RCRAgQIAAAQIECAh3N0CAAAECBAgQIEAgAQHhnsCSjEiAAAECBAgQIEBAuLsBAgQIECBAgAABAgkICPcElmREAgQIECBAgAABAsLdDRAgQIAAAQIECBBIQEC4J7AkIxIgQIAAAQIECBAQ7m6AAAECBAgQIECAQAICwj2BJRmRAAECBAgQIECAgHB3AwQIECBAgAABAgQSEBDuCSzJiAQIECBAgAABAgSEuxsgQIAAgSQEftnza3Qq6hdvvTI+WhU2q/GZ/+vfV+MvyC8gQCB5AeGe/Aq9AAIECPw/BP7rkD5QWRlr1m2Mi9sUxkknnvD/QPYqCRCo1QLCvVavx3AECBAgkBf4N+FeVVUVVVURxx1XDyABAgTqjIBwrzOr9EIIECBQtwXy4T5xRK94ee7S2FxeEW1bnxu575sVnBEfrVgbU0rmRreiLjH9lUUxt2RUtG7ZPJ4tfTOWLPskdu3eG4XNm8bQh7tHx0vaZlh39R4Tt15/RXz+5YbY+N2WOHDgQAzuWxxdr+kQh/9H4ViPrdvyXh0BArVFQLjXlk2YgwABAgSOKZAP6XYXtowJwx+Mxqc2jOETSrPAzkX68pXrYsi4mdG1S4fofd9t0eS0U2Lxeytiatn8mD31sTi7aZOYs+iDKHv9nfh44dSoX//4KO47Nnbs3BUvTRkchS0KYs6iD2ParAXxyZIXYvfefYd8pv5Yj61Xzzv7zpcAgZoXEO41b+w3ECBAgEA1COTDffywnnHHTVdlz7hy7bfRY+CTsWLx9Fi/YVP0GfZ0LJv3VJzVtEn2899+/yN+3bc/TmvUMPv+51174srb+8eSVydGyxYFWbi3a1MYjw+4N/t57l38rncPzcK+QYP6R4T70R7bpHGjaniFnoIAAQLHFhDuLoQAAQIEkhDIh/ucklHRvu15h4T2wlnjomLHz9F/xHPx1YezDr6eXb/sjefK5seqLzfE/v2/Zf++tWJnLCgbG23Ob5GF+w2dL40exTdnP9u2fWdce+egeH/eU9Hw5JOOCPejPTb3br4vAgQI1LSAcK9pYc9PgAABAtUikA/3eTNHZ++S5762bN0eN3YfEu+8Nik2l2+PgaOnxRfvlh78fcOfKI3vt/wYz497JM44/dTYs3dfXH5L30PC/cbOl8UDxTf9o3A/2mOFe7Ws2JMQIPA3AsLdiRAgQIBAEgL5cH9yZO8ouq5TNnP+ozKrls6M1es2HhHuuajvdU9RdCvqnD3+szXfRM9Bk4V7Ehs3JAEChwsIdzdBgAABAkkI5MP9knatYvLIPtlHWXJ/jFpZWRmlUwbH8pXrjwj3+wdMjIIzT48nhveKTT+Ux5QZb8SnX3wd0yY8Gld3bJ99VMY77kms35AECESEcHcGBAgQIJCEQP4PS58Z0y9emL04yrdtj4suKIxJIx7K4vyvwj33B6uPT3wptlb8FBe2OifGD3swXnzt7fhg+eqYMWlQTC6ZK9yT2L4hCRDICQh3d0CAAAECBAgQIEAgAQHhnsCSjEiAAAECBAgQIEBAuLsBAgQIECBAgAABAgkICPcElmREAgQIECBAgAABAsLdDRAgQIAAAQIECBBIQEC4J7AkIxIgQIAAAQIECBAQ7m6AAAECBAgQIECAQAICwj2BJRmRAAECBAgQIECAgHB3AwQIECBAgAABAgQSEBDuCSzJiAQIECBAgAABAgSEuxsgQIAAAQIECBAgkICAcE9gSUYkQIAAAQIECBAgINzdAAECBAgQIECAAIEEBIR7AksyIgECBAgQIECAAAHh7gYIECBAgAABAgQIJCAg3BNYkhEJECBAgAABAgQICHc3QIAAAQIECBAgQCABAeGewJKMSIAAAQIECBAgQEC4uwECBAgQIECAAAECCQgI9wSWZEQCBAgQIECAAAECwt0NECBAgAABAgQIEEhAQLgnsCQjEiBAgAABAgQIEBDuboAAAQIECBAgQIBAAgLCPYElGZEAAQIECBAgQICAcHcDBAgQIECAAAECBBIQEO4JLMmIBAgQIECAAAECBIS7GyBAgAABAgQIECCQgIBwT2BJRiRAgAABAgQIECAg3N0AAQIECBAgQIAAgQQEhHsCSzIiAQIECBAgQIAAgT8BIEt4uMHy+vEAAAAASUVORK5CYII=" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-using-scalarizedposteriortransform">Appendix: Using <code>ScalarizedPosteriorTransform</code><a href="#appendix-using-scalarizedposteriortransform" class="hash-link" aria-label="Direct link to appendix-using-scalarizedposteriortransform" title="Direct link to appendix-using-scalarizedposteriortransform">​</a></h3>
<p>Using the <code>ScalarizedPosteriorTransform</code> abstraction, the functionality of
<code>ScalarizedUpperConfidenceBound</code> implemented above can be easily achieved in just a few
lines of code. <code>PosteriorTransform</code>s can be used with both the MC and analytic
acquisition functions.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acquisition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objective </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ScalarizedPosteriorTransform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> botorch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">acquisition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">analytic </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> UpperConfidenceBound</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ScalarizedPosteriorTransform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">weights</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUCB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UpperConfidenceBound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> beta</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> posterior_transform</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pt</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/pytorch/botorch/edit/main/docs/../docs/tutorials/custom_acquisition/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/botorch/docs/tutorials/custom_botorch_model_in_ax/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using a custom BoTorch model</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/botorch/docs/tutorials/closed_loop_botorch_only/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">q-Noisy Constrained EI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#upper-confidence-bound-ucb" class="table-of-contents__link toc-highlight">Upper Confidence Bound (UCB)</a></li><li><a href="#a-scalarized-version-of-q-ucb" class="table-of-contents__link toc-highlight">A scalarized version of q-UCB</a></li><li><a href="#a-scalarized-version-of-analytic-ucb-q1-only" class="table-of-contents__link toc-highlight">A scalarized version of analytic UCB (<code>q=1</code> only)</a></li><li><a href="#using-the-custom-acquisition-function-with-axs-service-api" class="table-of-contents__link toc-highlight">Using the custom acquisition function with Ax&#39;s Service API</a><ul><li><a href="#registering-the-new-acquisition-function" class="table-of-contents__link toc-highlight">Registering the new acquisition function</a></li><li><a href="#setting-up-a-generationstrategy-using-botorch_modular-with-our-custom-acquistion-function" class="table-of-contents__link toc-highlight">Setting up a <code>GenerationStrategy</code> using <code>BOTORCH_MODULAR</code> with our custom acquistion function.</a></li><li><a href="#setting-up-the-experiment" class="table-of-contents__link toc-highlight">Setting up the experiment</a></li><li><a href="#running-the-bo-loop" class="table-of-contents__link toc-highlight">Running the BO loop</a></li><li><a href="#viewing-trials-and-plotting-the-pareto-frontier" class="table-of-contents__link toc-highlight">Viewing trials and plotting the Pareto frontier</a></li><li><a href="#appendix-using-scalarizedposteriortransform" class="table-of-contents__link toc-highlight">Appendix: Using <code>ScalarizedPosteriorTransform</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/botorch/docs/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/botorch/docs/getting_started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/botorch/docs/tutorials/">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/botorch/api/">API Reference</a></li><li class="footer__item"><a href="https://arxiv.org/abs/1910.06403" target="_blank" rel="noopener noreferrer" class="footer__link-item">Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/pytorch/botorch" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><iframe src="https://ghbtns.com/github-btn.html?user=pytorch&amp;repo=botorch&amp;type=star&amp;count=true&amp;size=small" title="GitHub Stars"></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/botorch/img/meta_opensource_logo_negative.svg" alt="Botorch" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/botorch/img/meta_opensource_logo_negative.svg" alt="Botorch" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2024 Meta Platforms, Inc.</div></div></div></footer></div>
</body>
</html>